<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gemini Key Validator</title>
    <style>
        body { background: #111; color: #fff; font-family: monospace; padding: 50px; }
        input { width: 100%; padding: 15px; background: #222; border: 1px solid #444; color: #0f0; font-family: monospace; }
        button { margin-top: 20px; padding: 15px 30px; background: #007bff; color: white; border: none; cursor: pointer; font-size: 16px; font-weight: bold; }
        #output { margin-top: 20px; white-space: pre-wrap; background: #000; padding: 20px; border: 1px solid #333; }
        .success { color: #0f0; }
        .error { color: #f00; }
    </style>
</head>
<body>
    <h1>üîë API Key Validator</h1>
    <p>Paste your Personal Gmail Key below to test permissions.</p>
    
    <input type="text" id="apiKey" placeholder="AIzaSy..." />
    <button onclick="testKey()">TEST KEY NOW</button>
    
    <div id="output">Waiting...</div>

    <script>
        async function testKey() {
            const key = document.getElementById('apiKey').value.trim();
            const output = document.getElementById('output');
            
            if (!key.startsWith("AIza")) {
                output.innerHTML = "<span class='error'>‚ùå That doesn't look like a Google API Key. It should start with 'AIza'.</span>";
                return;
            }

            output.innerHTML = "Contacting Google Servers...";

            try {
                // We ask Google: "List all models this key is allowed to use"
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${key}`);
                const data = await response.json();

                if (data.error) {
                    output.innerHTML = `<span class='error'>‚ùå GOOGLE REJECTED THE KEY:</span>\n\nCode: ${data.error.code}\nMessage: ${data.error.message}\n\nWHAT THIS MEANS:\n${explainError(data.error.code)}`;
                } else {
                    const availableModels = data.models.map(m => m.name).join("\n");
                    output.innerHTML = `<span class='success'>‚úÖ SUCCESS! THE KEY WORKS!</span>\n\nYour key has access to:\n${availableModels}`;
                }
            } catch (e) {
                output.innerHTML = `<span class='error'>‚ùå NETWORK ERROR</span>\n\nYour browser blocked the connection.\nDo you have an AdBlocker or VPN on?\nError: ${e.message}`;
            }
        }

        function explainError(code) {
            if (code == 400) return "INVALID KEY. You might have pasted a Project ID instead of the API Key.";
            if (code == 403) return "PERMISSION DENIED. This key exists, but the 'Generative Language API' is turned OFF in the Google Cloud Console.";
            if (code == 404) return "NOT FOUND. This usually means the key is for Vertex AI (Enterprise), not AI Studio (Personal).";
            return "Unknown Google Error.";
        }
    </script>
</body>
</html>